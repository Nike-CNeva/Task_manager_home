{"ast":null,"code":"import { mapState } from 'vuex';\nimport { fetchWithToken } from '@/utils/api';\nexport default {\n  data() {\n    return {\n      currentTime: ''\n    };\n  },\n  computed: {\n    ...mapState('token'),\n    userAuthenticated() {\n      return !!this.token;\n    },\n    userName() {\n      return this.user?.name || 'Гость';\n    }\n  },\n  mounted() {\n    this.getData();\n    setInterval(this.updateTime, 1000);\n  },\n  methods: {\n    async getData() {\n      try {\n        const response = await fetchWithToken('/api/home', {\n          headers: {\n            Authorization: `Bearer ${this.token}` // Добавляем токен в заголовок\n          }\n        });\n        this.currentTime = new Date(response.data.current_datetime).toLocaleString();\n      } catch (error) {\n        console.error(\"Ошибка при получении данных:\", error);\n      }\n    },\n    updateTime() {\n      const currentTime = new Date();\n      this.currentTime = currentTime.toLocaleString();\n    }\n  }\n};","map":{"version":3,"names":["mapState","fetchWithToken","data","currentTime","computed","userAuthenticated","token","userName","user","name","mounted","getData","setInterval","updateTime","methods","response","headers","Authorization","Date","current_datetime","toLocaleString","error","console"],"sources":["C:\\Users\\nikec\\frontend\\src\\components\\HomePage.vue"],"sourcesContent":["<template>\r\n  <div class=\"row justify-content-center\">\r\n    <div class=\"col-md-12\">\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <p>Текущая дата и время: <span>{{ currentTime }}</span></p>\r\n\r\n          <div v-if=\"userAuthenticated\" id=\"auth-content\">\r\n            <h2>Добро пожаловать, {{ userName }}!</h2>\r\n            <a href=\"/tasks\" class=\"btn btn-success\">Перейти к задачам</a>\r\n          </div>\r\n\r\n          <div v-else id=\"auth-content\">\r\n            <div class=\"alert alert-warning mt-4\">\r\n              <h4 class=\"alert-heading\">Добро пожаловать на главную страницу!</h4>\r\n              <p>Пожалуйста, авторизуйтесь, чтобы начать работать.</p>\r\n              <a href=\"/login\" class=\"btn btn-primary\">Войти</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\nimport { fetchWithToken } from '@/utils/api';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      currentTime: ''\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState('token'),\r\n    userAuthenticated() {\r\n      return !!this.token;\r\n    },\r\n    userName() {\r\n      return this.user?.name || 'Гость';\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getData();\r\n    setInterval(this.updateTime, 1000);\r\n  },\r\n  methods: {\r\n    async getData() {\r\n      try {\r\n        const response = await fetchWithToken('/api/home', {\r\n          headers: {\r\n            Authorization: `Bearer ${this.token}`,  // Добавляем токен в заголовок\r\n          }\r\n        });\r\n\r\n        this.currentTime = new Date(response.data.current_datetime).toLocaleString();\r\n        \r\n\r\n      } catch (error) {\r\n        console.error(\"Ошибка при получении данных:\", error);\r\n      }\r\n    },\r\n    updateTime() {\r\n      const currentTime = new Date();\r\n      this.currentTime = currentTime.toLocaleString();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Добавьте стили для компонента, если необходимо */\r\n</style>\r\n"],"mappings":"AA0BA,SAASA,QAAO,QAAS,MAAM;AAC/B,SAASC,cAAa,QAAS,aAAa;AAE5C,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE;IACf,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACR,GAAGJ,QAAQ,CAAC,OAAO,CAAC;IACpBK,iBAAiBA,CAAA,EAAG;MAClB,OAAO,CAAC,CAAC,IAAI,CAACC,KAAK;IACrB,CAAC;IACDC,QAAQA,CAAA,EAAG;MACT,OAAO,IAAI,CAACC,IAAI,EAAEC,IAAG,IAAK,OAAO;IACnC;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,OAAO,CAAC,CAAC;IACdC,WAAW,CAAC,IAAI,CAACC,UAAU,EAAE,IAAI,CAAC;EACpC,CAAC;EACDC,OAAO,EAAE;IACP,MAAMH,OAAOA,CAAA,EAAG;MACd,IAAI;QACF,MAAMI,QAAO,GAAI,MAAMd,cAAc,CAAC,WAAW,EAAE;UACjDe,OAAO,EAAE;YACPC,aAAa,EAAE,UAAU,IAAI,CAACX,KAAK,EAAE,CAAG;UAC1C;QACF,CAAC,CAAC;QAEF,IAAI,CAACH,WAAU,GAAI,IAAIe,IAAI,CAACH,QAAQ,CAACb,IAAI,CAACiB,gBAAgB,CAAC,CAACC,cAAc,CAAC,CAAC;MAG9E,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD;IACF,CAAC;IACDR,UAAUA,CAAA,EAAG;MACX,MAAMV,WAAU,GAAI,IAAIe,IAAI,CAAC,CAAC;MAC9B,IAAI,CAACf,WAAU,GAAIA,WAAW,CAACiB,cAAc,CAAC,CAAC;IACjD;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}