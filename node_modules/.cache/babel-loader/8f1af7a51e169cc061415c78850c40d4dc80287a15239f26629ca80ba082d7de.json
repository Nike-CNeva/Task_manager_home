{"ast":null,"code":"// utils/api.js\nexport async function fetchWithToken(url, options = {}) {\n  const token = localStorage.getItem('auth_token'); // Получаем токен из localStorage\n  if (!token) {\n    throw new Error('Токен не найден! Пожалуйста, войдите в систему.');\n  }\n  const headers = {\n    'Authorization': `Bearer ${token}`,\n    // Добавляем токен в заголовок\n    'Content-Type': 'application/json',\n    ...options.headers // Сливаем пользовательские заголовки\n  };\n  const response = await fetch(url, {\n    ...options,\n    headers\n  });\n  if (!response.ok) {\n    const errorData = await response.json();\n    throw new Error(errorData.detail || 'Неизвестная ошибка');\n  }\n  return response.json();\n}","map":{"version":3,"names":["fetchWithToken","url","options","token","localStorage","getItem","Error","headers","response","fetch","ok","errorData","json","detail"],"sources":["C:/task_manager/src/utils/api.js"],"sourcesContent":["// utils/api.js\r\nexport async function fetchWithToken(url, options = {}) {\r\n    const token = localStorage.getItem('auth_token');  // Получаем токен из localStorage\r\n    if (!token) {\r\n      throw new Error('Токен не найден! Пожалуйста, войдите в систему.');\r\n    }\r\n  \r\n    const headers = {\r\n      'Authorization': `Bearer ${token}`,  // Добавляем токен в заголовок\r\n      'Content-Type': 'application/json',\r\n      ...options.headers,  // Сливаем пользовательские заголовки\r\n    };\r\n  \r\n    const response = await fetch(url, {\r\n      ...options,\r\n      headers,\r\n    });\r\n  \r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.detail || 'Неизвестная ошибка');\r\n    }\r\n  \r\n    return response.json();\r\n  }\r\n  "],"mappings":"AAAA;AACA,OAAO,eAAeA,cAAcA,CAACC,GAAG,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EACpD,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAE;EACnD,IAAI,CAACF,KAAK,EAAE;IACV,MAAM,IAAIG,KAAK,CAAC,iDAAiD,CAAC;EACpE;EAEA,MAAMC,OAAO,GAAG;IACd,eAAe,EAAE,UAAUJ,KAAK,EAAE;IAAG;IACrC,cAAc,EAAE,kBAAkB;IAClC,GAAGD,OAAO,CAACK,OAAO,CAAG;EACvB,CAAC;EAED,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACR,GAAG,EAAE;IAChC,GAAGC,OAAO;IACVK;EACF,CAAC,CAAC;EAEF,IAAI,CAACC,QAAQ,CAACE,EAAE,EAAE;IAChB,MAAMC,SAAS,GAAG,MAAMH,QAAQ,CAACI,IAAI,CAAC,CAAC;IACvC,MAAM,IAAIN,KAAK,CAACK,SAAS,CAACE,MAAM,IAAI,oBAAoB,CAAC;EAC3D;EAEA,OAAOL,QAAQ,CAACI,IAAI,CAAC,CAAC;AACxB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}